<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('partials/head') %>
</head>

<body class="container">

  <header>
    <%- include('partials/header') %>
  </header>

  <main>
    <p>Please enter your details to login.</p>
    <form id="login">
      
      </br><label>Login</label>
      <input type="text" placeholder="username" id="username">
      <input type="password" placeholder="password" id="password">
      </br><input type="submit">Submit</button>
    </form>

    <script>
      const form = document.getElementById('login')
      form.addEventListener('submit', login)

      async function login(event) {
        event.preventDefault()

        const username = document.getElementById('username').value
        const password = document.getElementById('password').value
        
        const result = await fetch('/processlogin', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            username, password
          })
        }).then((res) => res.json())

        if (result.status === 'ok') {
          //everything went ok 
        res.redirect('/dashboard') 
        }
        console.log(result)
      }
    </script>

  </main>


  <%- include('partials/footer') %>